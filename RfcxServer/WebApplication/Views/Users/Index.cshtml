@model WebApplication.Models.User

@section Style {
    <style>

        #div_tabla_usuarios {
            margin-top: 20px;
            margin-bottom: 50px;
            margin-left: 20px;
        }


        th {
            font-size: 1.5em;
            padding-right: 20px;
        }

        td {
            font-size: 1.2em;
            padding-right: 20px;
        }

        .eliminar_label {
             cursor:pointer;
             color:blue;
             text-decoration:underline;
        }

        .eliminar_label:hover {
             text-decoration:none;
             text-shadow: 1px 1px 1px #555;
        }
        .modal-footer {
            text-align: center !important;
        }
    </style>
}

<div id="div_tabla_usuarios">
    <table id="tabla_usuarios" class="cell-border display compact">
        <thead>
            <tr>
                <th>User Id</th>
                <th>Username</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var par in @ViewBag.UsersInDB)
            {
                <tr>
                    <td class="userId">@par.UserId</td>
                    <td>@par.Username</td>
                    <td> <a href="/users/update/@par.UserId">Editar</a> </td>
                    <td class="eliminar_label"> Eliminar</td>
                </tr>
            }
        </tbody>
    </table>
    <a href="/users/create"><label>Crear Usuario</label></a>
</div>

<script src="~/js/jquery-3.3.1.min.js" type="text/javascript"></script>
<script src="~/js/bootstrap.js"></script>
<script src="~/js/bootstrap-dialog.min.js" type="text/javascript"></script>
<script src="~/js/jquery.dataTables.min.js" type="text/javascript"></script>
<script src="~/js/select2.min.js" type="text/javascript"></script>
<script src="~/js/es.js" type="text/javascript"></script>
<script>
    $(document).ready(function () {
        $(".eliminar_label").click(function (e) {
            var tr = $(this).closest("tr");
            var $item = tr.find(".userId").text();

            $.ajax({
                url: '/api/users/' + $item,
                type: 'DELETE',
                success: function (result) {
                    tr.remove();
                }
            });

        });
    });
</script>